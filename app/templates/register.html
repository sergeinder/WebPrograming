<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel ="stylesheet" href="{{ url_for('static', path='/css/header_block.css') }}">
    <link rel ="stylesheet" href="{{ url_for('static', path='/css/login.css') }}">
    <title>Register</title>
</head>
<body>
  <header>
    <div class="menu">
      <a href="http://localhost:8000/pages/main">Home</a>
      <a>Hotels</a>
      <a>Events</a>
    </div>
    <div class="account">
      <a href="http://localhost:8000/pages/login">Login</a>
      <a href="http://localhost:8000/pages/register" class="active">Register</a>
    </div>
  </header>

    <div class="container">
        <div class="wrapper" id = "wrapper">
          <div class="title"><span>Register Form</span></div>
          <form class='formWithValidation' action="#">
            <div class="row">
              <input id="email" type = "text" placeholder="Enter Email" name="email">
              <span id ="emailError" class="error"></span>
            </div>
            <div class="row">
              <input id="psw" type = "text" placeholder="Enter Password" name="psw">
              <span id ="pswError" class="error"></span>
            </div>
            <div class="row">
                <input id="psw-repeat" type = "text" placeholder="Repeat Password" name="psw-repeat">
                <span id ="psw-repeatError" class="error"></span>
              </div>
            <div class="row button">
              <input type="submit" value="Register">
            </div>
            <div class="signup-link">Have an account? <a href="http://localhost:8000/pages/login">Login</a></div>
          </form>
        </div>
    </div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const wrapper = document.getElementById('wrapper');

    wrapper.addEventListener('submit', function(event) {
        event.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('psw').value;
        const passwordRepeat = document.getElementById('psw-repeat').value;

        // Здесь должна быть логика отправки данных на сервер для авторизации
        console.log(`Email: ${email}, Password: ${password}`);

        wrapper.reset();
    });
});


document.getElementById('wrapper').addEventListener('submit', function(event) {
    event.preventDefault();

    var emailError = document.getElementById('emailError');
    var passwordError = document.getElementById('pswError');
    var passwordRepeatError = document.getElementById('psw-repeatError');

    var email = document.getElementById('email').value;
    var password = document.getElementById('psw').value;
    var passwordRepeat = document.getElementById('psw-repeat').value;

    if (email === '') {
      emailError.textContent = 'Email пользователя не может быть пустым';
    } else if (!validateEmail(email)) {
      emailError.textContent = 'Некорректный email';
    }

    if (password === '') {
      passwordError.textContent = 'Пароль не может быть пустым';
    } else if (!validatePassword(password)) {
      passwordError = 'Пароль должен содержать не менее 8 символов, буквы и цифры';
    }

    if (passwordRepeat === "") {
      passwordRepeatError.textContent = 'Пароль не может быть пустым';
    }else if(password !== passwordRepeat){
      passwordRepeatError.textContent = 'Пароль должен повторяться';
    }

    });

    function validateEmail(email) {
        var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    }

    function validatePassword(password) {
        var passwordRegex = /^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/;
        return passwordRegex.test(password);
    }
</script>
</body>
</html>